 <!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Contact — Feedback Form</title>
    <meta name="description" content="Feedback & contact form" />
    <style>
        :root{--bg:#f6f8fb;--card:#ffffff;--accent:#2563eb;--muted:#6b7280}
        html,body{height:100%}
        body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Robotto,"Helvetica Neue",Arial; background:var(--bg); color:#111}
        .container{max-width:900px;margin:48px auto;padding:24px}
        .card{background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06);padding:28px}
        h1{margin:0 0 8px;font-size:1.5rem}
        p.lead{margin:0 0 20px;color:var(--muted)}

        form{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
        label{display:block;font-size:0.9rem;margin-bottom:6px}
        input[type="text"],input[type="email"],input[type="tel"],select,textarea{width:100%;padding:10px 12px;border:1px solid #e6e9ef;border-radius:8px;font-size:0.95rem}
        textarea{min-height:140px;resize:vertical;grid-column:1 / -1}
        .full{grid-column:1 / -1}
        .actions{display:flex;gap:12px;align-items:center;margin-top:8px}
        .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;font-weight:600;cursor:pointer}
        .btn.secondary{background:transparent;color:var(--accent);border:1px solid #dbeafe}
        .muted{color:var(--muted);font-size:0.9rem}
        .consent{display:flex;gap:10px;align-items:flex-start}
        .feedback-meta{display:flex;gap:12px;align-items:center}

        @media (max-width:700px){
            form{grid-template-columns:1fr}
        }

        /* success toast */
        .toast{position:fixed;right:20px;bottom:20px;background:#0f172a;color:white;padding:12px 16px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6);display:none}
    </style>
</head>
<body>
    <main class="container">
        <div class="card">
            <h1>Contact Us</h1>
            <p class="lead">We're happy to hear from you. Use the form below to send feedback, report a bug, or ask a question. We'll get back to you as soon as we can.</p>

            <form id="feedbackForm" novalidate>
                <div>
                    <label for="name">Full name</label>
                    <input id="name" name="name" type="text" placeholder="Your name" required minlength="2" />
                </div>

                <div>
                    <label for="email">Email address</label>
                    <input id="email" name="email" type="email" placeholder="you@example.com" required />
                </div>

                <div>
                    <label for="phone">Phone (optional)</label>
                    <input id="phone" name="phone" type="tel" placeholder="(555) 555-5555" />
                </div>

                <div>
                    <label for="subject">Subject</label>
                    <input id="subject" name="subject" type="text" placeholder="Short summary" required />
                </div>

                <div class="full">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Tell us what's on your mind..." required minlength="10"></textarea>
                </div>

                <div>
                    <label for="type">Type of feedback</label>
                    <select id="type" name="type">
                        <option value="general">General feedback</option>
                        <option value="bug">Bug report</option>
                        <option value="feature">Feature request</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div>
                    <label>How satisfied are you?</label>
                    <div class="feedback-meta" aria-hidden="false">
                        <label><input type="radio" name="rating" value="5" checked /> 5</label>
                        <label><input type="radio" name="rating" value="4" /> 4</label>
                        <label><input type="radio" name="rating" value="3" /> 3</label>
                        <label><input type="radio" name="rating" value="2" /> 2</label>
                        <label><input type="radio" name="rating" value="1" /> 1</label>
                    </div>
                </div>

                <div class="full">
                    <label for="screenshot">Attach a screenshot (optional)</label>
                    <input id="screenshot" name="screenshot" type="file" accept="image/*" />
                    <p class="muted">Max file size: 5MB. Files are not uploaded anywhere by default; they are used client-side to help you preview or package the report.</p>
                </div>

                <div class="full consent">
                    <input id="consent" type="checkbox" name="consent" required />
                    <label for="consent" class="muted">I consent to having this information used to respond to my inquiry. I understand this form does not create a secure channel for sensitive information.</label>
                </div>

                <div class="full actions">
                    <button class="btn" type="submit">Send Feedback</button>
                    <button class="btn secondary" type="button" id="downloadBtn">Download Copy</button>
                    <div style="margin-left:auto" class="muted">Or email us directly at <a href="mailto:support@example.com">support@example.com</a></div>
                </div>
            </form>

            <p class="muted" style="margin-top:12px">Note: This sample form is client-side only. To actually collect responses on a server, replace the JavaScript `sendReport()` function with a `fetch()` that POSTs to your server endpoint or integrate with a service like Formspree, Netlify Forms, or your backend.</p>
        </div>
    </main>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
        const form = document.getElementById('feedbackForm');
        const toast = document.getElementById('toast');
        const downloadBtn = document.getElementById('downloadBtn');

        function showToast(msg, ms=3600){
            toast.textContent = msg; toast.style.display = 'block';
            setTimeout(()=>{toast.style.display='none'}, ms);
        }

        function collectFormData(){
            const fd = new FormData(form);
            const obj = {};
            for (const [k,v] of fd.entries()){
                if (k === 'screenshot') continue; // handled separately
                obj[k]=v;
            }
            // rating (radio) may not be in fd.entries if unchecked — ensure we capture it
            const rating = form.querySelector('input[name="rating"]:checked');
            obj.rating = rating ? rating.value : null;
            obj.timestamp = new Date().toISOString();
            return obj;
        }

        async function sendReport(payload){
            // This function is a placeholder. Replace URL and logic to send to your server.
            // Example with fetch:
            // await fetch('/api/feedback', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});

            // For demo, we'll just wait 700ms and resolve.
            return new Promise(resolve => setTimeout(resolve,700));
        }

        form.addEventListener('submit', async (e)=>{
            e.preventDefault();
            if (!form.checkValidity()){
                form.reportValidity();
                return;
            }

            const payload = collectFormData();

            // If a file was attached, we convert it to a small dataURL (careful with large files)
            const fileInput = document.getElementById('screenshot');
            const file = fileInput.files && fileInput.files[0];
            if (file){
                if (file.size > 5_000_000){
                    showToast('Attachment is larger than 5MB — please resize or remove it.');
                    return;
                }
                payload.screenshotName = file.name;
                // Convert to data URL (optional) — comment out if you don't want embedded data
                payload.screenshotData = await (new Promise((res,rej)=>{
                    const r=new FileReader(); r.onload=()=>res(r.result); r.onerror=()=>rej(); r.readAsDataURL(file);
                }));
            }

            try{
                await sendReport(payload);
                showToast('Thanks — your feedback was sent!');
                form.reset();
            }catch(err){
                console.error(err);
                showToast('Sorry — we could not send your feedback.');
            }
        });

        // Download a JSON copy of the submission
        downloadBtn.addEventListener('click', async ()=>{
            if (!form.checkValidity()){ form.reportValidity(); return; }
            const payload = collectFormData();
            // do not include big binary data in the download to keep it smaller
            const blob = new Blob([JSON.stringify(payload, null, 2)], {type:'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'feedback-copy.json'; document.body.appendChild(a); a.click(); a.remove();
            URL.revokeObjectURL(url);
            showToast('A copy of your feedback has been downloaded.');
        });
    </script>
</body>
</html>
